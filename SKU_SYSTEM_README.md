# ระบบจัดการ SKU (Stock Keeping Unit)

## ภาพรวม

ระบบจัดการ SKU ถูกออกแบบมาเพื่อแยกการจัดการสินค้าตามตัวเลือกและหน่วยให้ละเอียด โดยแอดมินสามารถระบุตัวอักษรนำหน้า SKU และระบบจะสร้างรหัส SKU อัตโนมัติ พร้อมเก็บข้อมูลไว้ใช้ในอนาคตบนฐานข้อมูล

## คุณสมบัติหลัก

### 1. การจัดการ SKU แยกตามตัวเลือกและหน่วย
- แยก SKU ตามหน่วย (เช่น ชิ้น, กล่อง, เมตร)
- แยก SKU ตามตัวเลือกสินค้า (เช่น สี, ขนาด, รุ่น)
- รองรับการผสมผสานระหว่างหน่วยและตัวเลือก

### 2. การสร้างรหัส SKU อัตโนมัติ
- แอดมินระบุตัวอักษรนำหน้า SKU (เช่น PRD, CAT)
- ระบบสร้างรหัส SKU อัตโนมัติด้วย timestamp และตัวอักษรสุ่ม
- รูปแบบ: `{PREFIX}{TIMESTAMP}{RANDOM}` (เช่น PRD123456ABC)

### 3. การจัดการข้อมูลครบถ้วน
- ราคาและค่าส่งแยกตาม SKU
- จำนวนสินค้าคงเหลือและระดับสต็อก
- สถานะการใช้งาน (เปิด/ปิด)
- วันที่สร้างและอัปเดต

## โครงสร้างฐานข้อมูล

### โมเดล SKU
```typescript
interface ISKU {
  productId: string;           // ID สินค้า
  skuPrefix: string;           // ตัวอักษรนำหน้า SKU
  skuCode: string;             // รหัส SKU ที่สร้างอัตโนมัติ
  unitLabel?: string;          // หน่วย (เช่น ชิ้น, กล่อง)
  options?: Record<string, string>; // ตัวเลือกสินค้า
  price: number;               // ราคา
  shippingFee?: number;        // ค่าส่ง
  isActive: boolean;           // สถานะการใช้งาน
  stockQuantity?: number;      // จำนวนสินค้าคงเหลือ
  minStockLevel?: number;      // ระดับสินค้าขั้นต่ำ
  maxStockLevel?: number;      // ระดับสินค้าสูงสุด
  createdAt: Date;             // วันที่สร้าง
  updatedAt: Date;             // วันที่อัปเดต
}
```

## การใช้งาน

### 1. หน้าแอดมิน SKU หลัก (`/admin/sku-configs`)
- แสดงรายการ SKU ทั้งหมด
- เพิ่ม/แก้ไข/ลบ SKU
- จัดการสถานะการใช้งาน
- ดูข้อมูลสต็อกและราคา

### 2. การจัดการ SKU ในหน้าแอดมินสินค้า
- ใช้คอมโพเนนต์ `SKUManager` เพื่อจัดการ SKU ของสินค้าแต่ละตัว
- แสดง SKU ทั้งหมดของสินค้าในรูปแบบการ์ด
- จัดการ SKU แยกตามตัวเลือกและหน่วย

### 3. API Endpoints
- `GET /api/admin/sku-configs` - ดึงข้อมูล SKU ทั้งหมด
- `POST /api/admin/sku-configs` - สร้าง SKU ใหม่
- `GET /api/admin/sku-configs/[id]` - ดึงข้อมูล SKU เดี่ยว
- `PUT /api/admin/sku-configs/[id]` - อัปเดต SKU
- `DELETE /api/admin/sku-configs/[id]` - ลบ SKU

## ตัวอย่างการใช้งาน

### การสร้าง SKU สำหรับสินค้าที่มีตัวเลือก
```
สินค้า: เสื้อยืด
ตัวอักษรนำหน้า: TSH
หน่วย: ชิ้น

SKU ที่สร้าง:
- TSH123456ABC (สีแดง, ขนาด S)
- TSH123456DEF (สีแดง, ขนาด M)
- TSH123456GHI (สีน้ำเงิน, ขนาด S)
- TSH123456JKL (สีน้ำเงิน, ขนาด M)
```

### การสร้าง SKU สำหรับสินค้าที่มีหลายหน่วย
```
สินค้า: กระดาษ
ตัวอักษรนำหน้า: PAP
หน่วย: แผ่น, กล่อง, รีม

SKU ที่สร้าง:
- PAP123456ABC (แผ่น)
- PAP123456DEF (กล่อง)
- PAP123456GHI (รีม)
```

## ประโยชน์ของระบบ

### 1. การจัดการสต็อกที่แม่นยำ
- แยกการติดตามสต็อกตามตัวเลือกและหน่วย
- ตั้งค่าระดับสต็อกขั้นต่ำและสูงสุด
- แจ้งเตือนเมื่อสต็อกต่ำ

### 2. การตั้งราคาที่ยืดหยุ่น
- ตั้งราคาแยกตาม SKU
- ตั้งค่าส่งแยกตาม SKU
- รองรับการเปลี่ยนแปลงราคาตามตัวเลือก

### 3. การวิเคราะห์ข้อมูล
- ติดตามการขายตาม SKU
- วิเคราะห์ความนิยมของตัวเลือกต่างๆ
- จัดการสต็อกอย่างมีประสิทธิภาพ

### 4. การใช้งานในอนาคต
- เชื่อมต่อกับระบบ WMS
- เชื่อมต่อกับระบบ POS
- เชื่อมต่อกับระบบ E-commerce
- การจัดการการผลิตและการจัดซื้อ

## การติดตั้งและใช้งาน

### 1. ตรวจสอบ Dependencies
```bash
npm install
```

### 2. รัน Migration (ถ้าจำเป็น)
```bash
npm run db:migrate
```

### 3. เข้าถึงระบบ
- หน้าแอดมิน SKU: `/admin/sku-configs`
- ต้องมีสิทธิ์ `MANAGE_PRODUCTS` หรือเป็นแอดมิน

## การพัฒนาต่อ

### 1. การเชื่อมต่อกับระบบอื่น
- เพิ่ม API สำหรับระบบ WMS
- เพิ่ม API สำหรับระบบ POS
- เพิ่ม API สำหรับระบบ E-commerce

### 2. การเพิ่มฟีเจอร์
- การนำเข้า/ส่งออกข้อมูล SKU
- การจัดการสต็อกแบบ Real-time
- การแจ้งเตือนอัตโนมัติ
- การวิเคราะห์ข้อมูลแบบ Advanced

### 3. การปรับปรุงประสิทธิภาพ
- เพิ่ม Caching สำหรับข้อมูล SKU
- เพิ่ม Indexing สำหรับการค้นหา
- เพิ่ม Pagination สำหรับรายการ SKU จำนวนมาก

## หมายเหตุ

- ระบบนี้ถูกออกแบบให้ใช้งานง่ายและยืดหยุ่น
- รองรับการขยายตัวในอนาคต
- ใช้เทคโนโลยีที่ทันสมัยและมีประสิทธิภาพ
- มีการจัดการสิทธิ์และความปลอดภัยที่เหมาะสม
