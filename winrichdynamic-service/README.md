# WinRich Dynamic Service - à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£ B2B

## âš ï¸ à¸ªà¸´à¹ˆà¸‡à¸ªà¸³à¸„à¸±à¸à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸£à¸²à¸š

**à¸à¸à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚**
- à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸«à¸£à¸·à¸­à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹„à¸Ÿà¸¥à¹Œà¹ƒà¸” à¹† à¹ƒà¸«à¹‰à¸”à¸¹à¹€à¸‰à¸à¸²à¸°à¹ƒà¸™ /winrichdynamic-service à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ à¸«à¹‰à¸²à¸¡à¹à¸à¹‰à¹„à¸‚à¹„à¸Ÿà¸¥à¹Œà¸™à¸­à¸à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ

**à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ B2B Subdomain Service à¸—à¸µà¹ˆà¸£à¸±à¸™à¸šà¸™ Railway à¹à¸¢à¸à¸ˆà¸²à¸à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸«à¸¥à¸±à¸**
- **à¸«à¹‰à¸²à¸¡à¹à¸à¹‰à¹„à¸‚** à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸«à¸¥à¸±à¸ (parent directory) à¸ˆà¸²à¸à¸—à¸µà¹ˆà¸™à¸µà¹ˆ
- à¸ªà¸²à¸¡à¸²à¸£à¸–à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹„à¸Ÿà¸¥à¹Œà¸«à¸£à¸·à¸­à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸•à¹ˆà¸²à¸‡ à¹† à¸‚à¸­à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¹„à¸”à¹‰à¸«à¸²à¸à¸ˆà¸³à¹€à¸›à¹‡à¸™ à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¹„à¸”à¹‰
- à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ subdomain B2B à¸—à¸µà¹ˆà¹à¸¢à¸ service à¸•à¹ˆà¸²à¸‡à¸«à¸²à¸
- à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¹ƒà¸”à¹† à¹ƒà¸™à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸«à¸¥à¸±à¸à¸•à¹‰à¸­à¸‡à¸—à¸³à¹ƒà¸™à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸±à¹‰à¸™à¹‚à¸”à¸¢à¸•à¸£à¸‡
- à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰à¸–à¸¹à¸à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸šà¸™ Railway

## ğŸ“‹ à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸

**à¸Šà¸·à¹ˆà¸­à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸:** winrichdynamic-service  
**à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™:** 1.0.0  
**à¸›à¸£à¸°à¹€à¸ à¸—:** Next.js B2B Service  
**Deployment:** Railway (Subdomain)  
**Description:** WinRich Dynamic Service - Billing, Quotation, and Business Management System

## ğŸš€ à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹à¸¥à¸°à¸£à¸±à¸™

### Prerequisites
- Node.js >= 18
- npm à¸«à¸£à¸·à¸­ yarn
- MongoDB database

### à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡
```bash
# à¹€à¸‚à¹‰à¸²à¹„à¸›à¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸
cd winrichdynamic-service

# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies
npm install

# à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ .env à¸ˆà¸²à¸ env.example
cp env.example .env

# à¹à¸à¹‰à¹„à¸‚à¸„à¹ˆà¸²à¹ƒà¸™ .env à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸à¸±à¸š environment à¸‚à¸­à¸‡à¸„à¸¸à¸“
```

### à¸à¸²à¸£à¸£à¸±à¸™à¹ƒà¸™ Development
```bash
npm run dev
```

### à¸à¸²à¸£ Build à¹à¸¥à¸° Deploy
```bash
# Build à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸
npm run build

# à¸£à¸±à¸™à¹ƒà¸™ production
npm start
```

## ğŸ“ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸

```
winrichdynamic-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ adminb2b/       # B2B Admin Panel
â”‚   â”‚   â”‚   â”œâ”€â”€ customers/  # à¸ˆà¸±à¸”à¸à¸²à¸£à¸¥à¸¹à¸à¸„à¹‰à¸²
â”‚   â”‚   â”‚   â”œâ”€â”€ quotations/ # à¸ˆà¸±à¸”à¸à¸²à¸£à¹ƒà¸šà¹€à¸ªà¸™à¸­à¸£à¸²à¸„à¸²
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx  # B2B Layout
â”‚   â”‚   â”œâ”€â”€ api/            # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ customers/  # Customer API
â”‚   â”‚   â”‚   â”œâ”€â”€ quotations/ # Quotation API
â”‚   â”‚   â”‚   â””â”€â”€ ping/       # Health Check
â”‚   â”‚   â””â”€â”€ globals.css     # Global Styles
â”‚   â”œâ”€â”€ components/         # React Components
â”‚   â”‚   â”œâ”€â”€ CustomerForm.tsx
â”‚   â”‚   â”œâ”€â”€ CustomerList.tsx
â”‚   â”‚   â”œâ”€â”€ QuotationForm.tsx
â”‚   â”‚   â””â”€â”€ ui/            # UI Components
â”‚   â”œâ”€â”€ lib/               # Utilities
â”‚   â”‚   â””â”€â”€ mongodb.ts     # Database connection
â”‚   â”œâ”€â”€ models/            # MongoDB Models
â”‚   â”‚   â”œâ”€â”€ Customer.ts
â”‚   â”‚   â””â”€â”€ Quotation.ts
â”‚   â””â”€â”€ schemas/           # Zod Schemas
â”‚       â”œâ”€â”€ customer.ts
â”‚       â””â”€â”€ quotation.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ next.config.js
â”œâ”€â”€ railway.json          # Railway configuration
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ README.md
```

## ğŸ”§ Scripts à¸—à¸µà¹ˆà¸¡à¸µ

- `npm run dev` - à¸£à¸±à¸™à¹ƒà¸™ development mode
- `npm run build` - Build à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸
- `npm run start` - à¸£à¸±à¸™à¹ƒà¸™ production mode
- `npm run lint` - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š code quality

## ğŸŒ Railway Deployment

### Environment Variables
à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹„à¸Ÿà¸¥à¹Œ `env.example` à¸ªà¸³à¸«à¸£à¸±à¸š environment variables à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™:

```env
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/winrichdynamic

# Next.js Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3001

# API Configuration
API_BASE_URL=http://localhost:3001/api

# LINE Bot Configuration
LINE_CHANNEL_SECRET=your_line_channel_secret_here
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token_here

# JWT Secret
JWT_SECRET=your_jwt_secret_here

# SMS Configuration (DeeSMSx)
DEESMSX_API_KEY=your_deesmsx_api_key_here
DEESMSX_SECRET_KEY=your_deesmsx_secret_key_here
DEESMSX_SENDER_NAME=deeSMS.OTP

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password_here

# App Configuration
NODE_ENV=development
NEXT_TELEMETRY_DISABLED=1
```

### Health Check
- **Path:** `/api/ping`
- **Timeout:** 100ms

### Port Configuration
- à¹ƒà¸Šà¹‰ `$PORT` environment variable à¸ˆà¸²à¸ Railway

## ğŸ“¦ Dependencies à¸«à¸¥à¸±à¸

### Production Dependencies
- **Next.js 15.3.1** - React framework
- **React 19.1.1** - UI library
- **Mongoose 8.17.1** - MongoDB ODM
- **@line/bot-sdk 10.1.1** - LINE Bot integration
- **Framer Motion 12.23.12** - Animations
- **Tailwind CSS 4.1.11** - Styling
- **Zod 4.0.17** - Schema validation
- **Axios 1.11.0** - HTTP client
- **Nodemailer 7.0.5** - Email sending
- **Puppeteer 24.16.0** - PDF generation

### Development Dependencies
- **TypeScript** - Type checking
- **ESLint 9.33.0** - Code linting
- **PostCSS 8.4.49** - CSS processing

## ğŸ”’ Security

- JWT tokens à¸ªà¸³à¸«à¸£à¸±à¸š authentication
- Environment variables à¸ªà¸³à¸«à¸£à¸±à¸š sensitive data
- Input validation à¸”à¹‰à¸§à¸¢ Zod
- MongoDB connection security

## ğŸ“Š Features

### B2B Admin Panel
- **Customer Management** - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²
- **Quotation Management** - à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¹ƒà¸šà¹€à¸ªà¸™à¸­à¸£à¸²à¸„à¸²
- **Business Analytics** - à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸˜à¸¸à¸£à¸à¸´à¸ˆ

### API Endpoints
- **Customer API** - CRUD operations à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸²
- **Quotation API** - à¸ˆà¸±à¸”à¸à¸²à¸£à¹ƒà¸šà¹€à¸ªà¸™à¸­à¸£à¸²à¸„à¸²
- **Health Check** - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¸£à¸°à¸šà¸š

### Integration
- **LINE Bot** - à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹à¸¥à¸°à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸²
- **Email Service** - à¸ªà¹ˆà¸‡à¹ƒà¸šà¹€à¸ªà¸™à¸­à¸£à¸²à¸„à¸²à¸—à¸²à¸‡à¸­à¸µà¹€à¸¡à¸¥
- **SMS Service (DeeSMSx)** - à¸ªà¹ˆà¸‡ OTP à¹à¸¥à¸°à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ SMS

## ğŸ› à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸›à¸±à¸à¸«à¸²

### à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸à¸šà¸šà¹ˆà¸­à¸¢

1. **MongoDB connection issues**
   ```bash
   # à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š MONGODB_URI à¹ƒà¸™ .env
   # à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š network connectivity
   ```

2. **Port conflicts**
   ```bash
   # à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š port à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
   lsof -i :3001
   ```

3. **Build errors**
   ```bash
   # Clear cache à¹à¸¥à¸° rebuild
   rm -rf .next
   npm run build
   ```

4. **Environment variables**
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Railway environment variables
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹„à¸Ÿà¸¥à¹Œ .env à¹ƒà¸™ development

## ğŸ“ à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­

à¸ªà¸³à¸«à¸£à¸±à¸šà¸›à¸±à¸à¸«à¸²à¸«à¸£à¸·à¸­à¸„à¸³à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰ à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²

---

## âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸³à¸„à¸±à¸

**à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ B2B Subdomain Service à¸—à¸µà¹ˆà¹à¸¢à¸à¸ˆà¸²à¸à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸«à¸¥à¸±à¸**
- **à¸«à¹‰à¸²à¸¡à¹à¸à¹‰à¹„à¸‚** à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸«à¸¥à¸±à¸ (parent directory) à¸ˆà¸²à¸à¸—à¸µà¹ˆà¸™à¸µà¹ˆ
- à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸•à¹‰à¸­à¸‡à¸—à¸³à¹ƒà¸™à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡à¹‚à¸”à¸¢à¸•à¸£à¸‡
- à¹€à¸à¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸›à¸±à¸à¸«à¸²à¸à¸²à¸£ deploy à¹à¸¥à¸°à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š
- à¹‚à¸›à¸£à¹€à¸ˆà¹‡à¸à¸™à¸µà¹‰à¸£à¸±à¸™à¸šà¸™ Railway à¹€à¸›à¹‡à¸™ subdomain à¹à¸¢à¸à¸•à¹ˆà¸²à¸‡à¸«à¸²à¸
