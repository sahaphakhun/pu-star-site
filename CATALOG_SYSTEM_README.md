# ระบบแคตตาล็อกสินค้า - PDF & Image Gallery System

## ภาพรวม
ระบบแคตตาล็อกสินค้าได้รับการปรับปรุงให้รองรับ 2 รูปแบบหลัก:
1. **ไฟล์ PDF** - เปิดดูได้ทันที
2. **ชุดรูปภาพ** - แสดงเป็นแกลเลอรี่คล้าย PDF

พร้อมระบบจัดการแอดมินที่รองรับการอัปโหลดหลายไฟล์และการตั้งชื่อที่กำหนดเอง

## คุณสมบัติใหม่

### 1. PDF Viewer
- **ไฟล์ PDF**: ปุ่ม "เปิดดู" สีเขียว - เปิดไฟล์ในหน้าต่างใหม่
- **รูปภาพ**: ปุ่ม "ดาวน์โหลด" สีส้ม - ดาวน์โหลดรูปภาพ
- **ไฟล์อื่นๆ**: ปุ่ม "ดาวน์โหลด" สีน้ำเงิน - ดาวน์โหลดไฟล์

### 2. PDF Preview (เฉพาะไฟล์ PDF)
- ปุ่ม "ตัวอย่าง" สีม่วง - แสดงไฟล์ PDF ใน modal หน้าเดียวกัน
- สามารถดูตัวอย่างได้โดยไม่ต้องออกจากหน้า
- มีตัวเลือกเปิดในแท็บใหม่

### 3. Image Preview (เฉพาะรูปภาพเดี่ยว)
- ปุ่ม "ตัวอย่าง" สีม่วง - แสดงรูปภาพใน modal หน้าเดียวกัน
- เหมาะสำหรับรูปภาพเดี่ยว

### 4. Image Gallery (สำหรับชุดรูปภาพ)
- ปุ่ม "แกลเลอรี่ (จำนวน)" สีน้ำเงินเข้ม - แสดงชุดรูปภาพหลายภาพ
- มีระบบนำทางระหว่างรูปภาพ (ลูกศรซ้าย-ขวา)
- แสดง thumbnail ด้านล่างสำหรับเลือกรูปภาพ
- แสดงตำแหน่งรูปภาพปัจจุบัน (เช่น 1 / 5)

### 5. ระบบจัดการแอดมิน
- **อัปโหลดไฟล์เดียว**: PDF, Word, Excel, รูปภาพ, ZIP
- **อัปโหลดชุดรูปภาพ**: รูปภาพหลายไฟล์พร้อมกัน
- **การตั้งชื่อ**: ชื่อไฟล์จริง + ชื่อที่แสดงให้ลูกค้าเห็น
- **หมวดหมู่**: จัดกลุ่มไฟล์ตามประเภท
- **การลบ**: ลบไฟล์และรูปภาพจาก Cloudinary

### 6. ข้อมูลไฟล์ที่ชัดเจน
- แสดงชื่อที่กำหนดเอง (displayName)
- แสดงชื่อไฟล์จริง (title)
- ประเภทไฟล์ (PDF, Word, Excel, รูปภาพ, ZIP, ชุดรูปภาพ)
- ขนาดไฟล์
- หมวดหมู่
- วันที่อัปโหลด

## โครงสร้างไฟล์

```
src/
├── components/
│   ├── PDFViewer.tsx      # คอมโพเนนต์หลักสำหรับเปิด/ดาวน์โหลดไฟล์
│   ├── PDFPreview.tsx     # คอมโพเนนต์แสดงตัวอย่าง PDF และรูปภาพ
│   └── ImageGallery.tsx   # คอมโพเนนต์แสดงแกลเลอรี่รูปภาพหลายภาพ
├── app/(shop)/
│   ├── catalog/
│   │   └── page.tsx       # หน้าแคตตาล็อกสำหรับลูกค้า
│   └── admin/
│       └── catalog/
│           └── page.tsx   # หน้าแอดมินจัดการแคตตาล็อก
├── models/
│   └── CatalogFile.ts     # โมเดลข้อมูลแคตตาล็อก
└── app/api/catalog/
    └── route.ts           # API สำหรับจัดการแคตตาล็อก
```

## โครงสร้างฐานข้อมูล

### CatalogFile Model
```typescript
{
  title: string,           // ชื่อไฟล์จริง
  displayName?: string,    // ชื่อที่แสดงให้ลูกค้าเห็น
  fileUrl: string,         // URL ไฟล์หลัก
  fileName: string,        // ชื่อไฟล์ใน Cloudinary
  fileType?: string,       // ประเภทไฟล์
  fileSize?: number,       // ขนาดไฟล์
  category?: string,       // หมวดหมู่
  isImageSet?: boolean,    // เป็นชุดรูปภาพหรือไม่
  imageUrls?: string[],    // รายการ URL รูปภาพทั้งหมด
  imageCount?: number,     // จำนวนรูปภาพในชุด
  createdAt: Date,         // วันที่สร้าง
  updatedAt: Date          // วันที่อัปเดต
}
```

## การใช้งาน

### สำหรับลูกค้า
1. เข้าสู่หน้าแคตตาล็อกสินค้า
2. เลือกไฟล์ที่ต้องการ
3. **ไฟล์ PDF**: คลิก "เปิดดู" หรือ "ตัวอย่าง"
4. **รูปภาพเดี่ยว**: คลิก "ตัวอย่าง" หรือ "ดาวน์โหลด"
5. **ชุดรูปภาพ**: คลิก "แกลเลอรี่" เพื่อดูภาพทั้งหมด

### สำหรับแอดมิน
1. เข้าสู่หน้าแอดมินแคตตาล็อก
2. คลิก "เพิ่มไฟล์ใหม่"
3. เลือกประเภทการอัปโหลด:
   - **ไฟล์เดียว**: เลือกไฟล์ 1 ไฟล์
   - **ชุดรูปภาพ**: เลือกรูปภาพหลายไฟล์
4. ระบุข้อมูล:
   - ชื่อไฟล์ (บังคับ)
   - ชื่อที่แสดง (ไม่บังคับ)
   - หมวดหมู่ (ไม่บังคับ)
5. คลิก "อัปโหลด"

## ประเภทไฟล์ที่รองรับ

### ไฟล์เอกสาร
- **PDF**: `application/pdf` - เปิดดูได้ + แสดงตัวอย่าง
- **Word**: `application/msword`, `application/vnd.openxmlformats-officedocument.wordprocessingml.document`
- **Excel**: `application/vnd.ms-excel`, `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`

### ไฟล์รูปภาพ
- **PNG**: `image/png` - แสดงตัวอย่าง + แกลเลอรี่
- **JPEG**: `image/jpeg`, `image/jpg` - แสดงตัวอย่าง + แกลเลอรี่
- **GIF**: `image/gif` - แสดงตัวอย่าง + แกลเลอรี่
- **WebP**: `image/webp` - แสดงตัวอย่าง + แกลเลอรี่
- **ชุดรูปภาพ**: `image/set` - แสดงแกลเลอรี่เท่านั้น

### ไฟล์อื่นๆ
- **ZIP**: `application/zip` - ดาวน์โหลด

## การปรับแต่ง

### สีปุ่ม
- **PDF เปิดดู**: สีเขียว (`bg-green-600`)
- **รูปภาพดาวน์โหลด**: สีส้ม (`bg-orange-600`)
- **ดาวน์โหลดทั่วไป**: สีน้ำเงิน (`bg-blue-600`)
- **ตัวอย่าง**: สีม่วง (`bg-purple-600`)
- **แกลเลอรี่**: สีน้ำเงินเข้ม (`bg-indigo-600`)

### ขนาดหน้าต่าง
- **เปิดดู PDF**: `width=1200, height=800`
- **ตัวอย่าง**: `max-w-6xl, max-h-[90vh]`
- **แกลเลอรี่**: `max-w-7xl, max-h-[95vh]`

## ระบบแกลเลอรี่รูปภาพ

### คุณสมบัติ
- แสดงรูปภาพขนาดใหญ่ตรงกลาง
- ปุ่มนำทางซ้าย-ขวา (ลูกศร)
- Thumbnail ด้านล่างสำหรับเลือกรูปภาพ
- แสดงตำแหน่งรูปภาพปัจจุบัน
- ปุ่มเปิดในแท็บใหม่

### การนำทาง
- **ลูกศรซ้าย**: รูปภาพก่อนหน้า
- **ลูกศรขวา**: รูปภาพถัดไป
- **Thumbnail**: คลิกเพื่อไปยังรูปภาพนั้น
- **ปิด**: คลิกนอกพื้นที่หรือปุ่มปิด

## ระบบจัดการแอดมิน

### ฟอร์มอัปโหลด
- **ชื่อไฟล์**: ชื่อไฟล์จริง (บังคับ)
- **ชื่อที่แสดง**: ชื่อที่ลูกค้าเห็น (ไม่บังคับ)
- **หมวดหมู่**: จัดกลุ่มไฟล์ (ไม่บังคับ)
- **ประเภทการอัปโหลด**: ไฟล์เดียว หรือ ชุดรูปภาพ
- **การเลือกไฟล์**: เลือกไฟล์เดียว หรือ หลายไฟล์

### การจัดการ
- **ดูรายการ**: แสดงไฟล์ทั้งหมดพร้อมข้อมูล
- **ลบไฟล์**: ลบไฟล์และรูปภาพจากระบบ
- **อัปเดต**: รีเฟรชข้อมูลอัตโนมัติ

## การอัปโหลด Cloudinary

### โฟลเดอร์
- **ไฟล์ทั่วไป**: `/catalog/`
- **รูปภาพ**: `/catalog/images/`

### การจัดการไฟล์
- **ไฟล์เดียว**: อัปโหลดตาม resource_type
- **ชุดรูปภาพ**: อัปโหลดเป็น image resource_type
- **การลบ**: ลบไฟล์ทั้งหมดในชุด

## ข้อควรระวัง

1. **Browser Support**: การแสดง PDF ขึ้นอยู่กับการรองรับของเบราว์เซอร์
2. **File Size**: ไฟล์ขนาดใหญ่อาจใช้เวลานานในการโหลด
3. **Image Quality**: รูปภาพจะแสดงในขนาดที่เหมาะสมกับหน้าจอ
4. **Security**: ไฟล์จะเปิดใน `target="_blank"` เพื่อความปลอดภัย
5. **Cloudinary Limits**: ตรวจสอบขีดจำกัดการอัปโหลดของ Cloudinary

## การพัฒนาต่อ

- เพิ่มการแสดงตัวอย่างสำหรับไฟล์ Word/Excel
- เพิ่มการค้นหาและกรองไฟล์
- เพิ่มการจัดเรียงตามประเภทไฟล์
- เพิ่มการแสดงสถิติการดาวน์โหลด/การดู
- เพิ่มการอัปโหลดหลายไฟล์พร้อมกัน
- เพิ่มการจัดการชุดรูปภาพ (เพิ่ม/ลบรูปภาพ)
- เพิ่มการแก้ไขข้อมูลไฟล์
- เพิ่มการจัดการหมวดหมู่
- เพิ่มการสำรองข้อมูล
- เพิ่มการจัดการสิทธิ์การเข้าถึง
